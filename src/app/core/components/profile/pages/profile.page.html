<div class="min-h-screen bg-cyber-surface py-8">
  <div class="container-content max-w-2xl">
    <!-- Loading State -->
    <div *ngIf="loading" class="flex justify-center items-center min-h-[400px]">
      <div class="animate-spin rounded-full h-12 w-12 border-4 border-cyber-accent-primary border-t-transparent"></div>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="bg-red-500 bg-opacity-10 text-red-500 p-4 rounded-lg text-center mb-6">
      {{ error }}
    </div>

    <!-- Profile Form -->
    <div *ngIf="!loading && !error" class="bg-cyber-card rounded-lg p-8 shadow-card">
      <h1 class="text-2xl font-bold text-cyber-text-primary mb-6">الملف الشخصي</h1>

      <!-- Success Message -->
      <div *ngIf="updateSuccess" class="mb-6 bg-green-500 bg-opacity-10 text-green-500 p-4 rounded-lg text-center">
        تم تحديث البيانات بنجاح
      </div>

      <form (ngSubmit)="updateProfile()" class="space-y-6">
        <!-- Personal Information -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- First Name -->
          <div>
            <label class="block text-sm font-medium text-cyber-text-primary mb-1">
              الاسم الأول
              <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              [(ngModel)]="updateData.first_name"
              name="first_name"
              class="w-full px-4 py-2 bg-cyber-surface border border-cyber-border rounded-lg text-cyber-text-primary focus:outline-none focus:border-cyber-accent-primary"
              [class.border-red-500]="errors['first_name']"
            >
            <span *ngIf="errors['first_name']" class="text-red-500 text-sm mt-1 block">
              {{ errors['first_name'] }}
            </span>
          </div>

          <!-- Last Name -->
          <div>
            <label class="block text-sm font-medium text-cyber-text-primary mb-1">
              الاسم الأخير
              <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              [(ngModel)]="updateData.last_name"
              name="last_name"
              class="w-full px-4 py-2 bg-cyber-surface border border-cyber-border rounded-lg text-cyber-text-primary focus:outline-none focus:border-cyber-accent-primary"
              [class.border-red-500]="errors['last_name']"
            >
            <span *ngIf="errors['last_name']" class="text-red-500 text-sm mt-1 block">
              {{ errors['last_name'] }}
            </span>
          </div>
        </div>

        <!-- Email -->
        <div>
          <label class="block text-sm font-medium text-cyber-text-primary mb-1">
            البريد الإلكتروني
            <span class="text-red-500">*</span>
          </label>
          <input
            type="email"
            [(ngModel)]="updateData.email"
            name="email"
            class="w-full px-4 py-2 bg-cyber-surface border border-cyber-border rounded-lg text-cyber-text-primary focus:outline-none focus:border-cyber-accent-primary"
            [class.border-red-500]="errors['email']"
          >
          <span *ngIf="errors['email']" class="text-red-500 text-sm mt-1 block">
            {{ errors['email'] }}
          </span>
        </div>

        <!-- Change Password Section -->
        <div class="border-t border-cyber-border pt-6">
          <h2 class="text-xl font-semibold text-cyber-text-primary mb-4">تغيير كلمة المرور</h2>
          
          <!-- Current Password -->
          <div class="mb-4">
            <label class="block text-sm font-medium text-cyber-text-primary mb-1">
              كلمة المرور الحالية
            </label>
            <input
              type="password"
              [(ngModel)]="updateData.current_password"
              name="current_password"
              class="w-full px-4 py-2 bg-cyber-surface border border-cyber-border rounded-lg text-cyber-text-primary focus:outline-none focus:border-cyber-accent-primary"
              [class.border-red-500]="errors['current_password']"
            >
            <span *ngIf="errors['current_password']" class="text-red-500 text-sm mt-1 block">
              {{ errors['current_password'] }}
            </span>
          </div>

          <!-- New Password -->
          <div class="mb-4">
            <label class="block text-sm font-medium text-cyber-text-primary mb-1">
              كلمة المرور الجديدة
            </label>
            <input
              type="password"
              [(ngModel)]="updateData.password"
              name="password"
              class="w-full px-4 py-2 bg-cyber-surface border border-cyber-border rounded-lg text-cyber-text-primary focus:outline-none focus:border-cyber-accent-primary"
              [class.border-red-500]="errors['password']"
            >
            <span *ngIf="errors['password']" class="text-red-500 text-sm mt-1 block">
              {{ errors['password'] }}
            </span>
          </div>

          <!-- Confirm New Password -->
          <div>
            <label class="block text-sm font-medium text-cyber-text-primary mb-1">
              تأكيد كلمة المرور الجديدة
            </label>
            <input
              type="password"
              [(ngModel)]="updateData.password_confirmation"
              name="password_confirmation"
              class="w-full px-4 py-2 bg-cyber-surface border border-cyber-border rounded-lg text-cyber-text-primary focus:outline-none focus:border-cyber-accent-primary"
              [class.border-red-500]="errors['password_confirmation']"
            >
            <span *ngIf="errors['password_confirmation']" class="text-red-500 text-sm mt-1 block">
              {{ errors['password_confirmation'] }}
            </span>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-end">
          <button
            type="submit"
            [disabled]="updating"
            class="bg-cyber-accent-primary text-white px-6 py-2 rounded-lg hover:bg-cyber-hover-primary transition-colors disabled:opacity-50"
          >
            <span *ngIf="!updating">حفظ التغييرات</span>
            <span *ngIf="updating">جاري الحفظ...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>