<div class="relative">
  <img
    [src]="src || fallbackSrc"
    [alt]="alt"
    [class]="className"
    loading="lazy"
    (error)="onImageError()"
    [ngStyle]="{'opacity': loaded ? 1 : 0}"
    (load)="onImageLoad()"
  >
  <div 
    *ngIf="!loaded"
    class="animate-pulse bg-gray-200 dark:bg-gray-700 absolute inset-0"
    [ngStyle]="{'width': width, 'height': height}"
  ></div>
</div>